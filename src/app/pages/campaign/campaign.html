<div class="h-full grid grid-rows-[1fr_auto]">
  <app-modal #ascensionModal></app-modal>
  <section class="grid grid-cols-[auto_1fr_25vw] text-white px-20">
    <app-sidebar
      [character]="character()"
      [attackDamage]="attackDamage()"
      [attackSpeed]="attackSpeed()"
      class="h-full"
    />
    <div
      class="flex justify-between text-main-cyan font-mono border-r-2 glow-cyan border-r-grid-line px-20"
    >
      <div class="flex justify-around mt-20 w-full">
        <div>
          <p class="text-main-cyan-muted text-sm">
            SECTOR_{{ character().currentStage }}-X_OHSIDIAN
          </p>
          <p class="text-6xl font-impact">VOID STALKER</p>
          <div>
            <p>
              {{ combatService.enemyHP() | BigDecimalFormat
              }}<span class="text-main-cyan-muted"> / </span
              >{{ combatService.enemyMaxHP() | BigDecimalFormat }} HP
            </p>
            <app-hp-bar
              [currentHP]="combatService.enemyHP()"
              [enemyMAXHP]="combatService.enemyMaxHP()"
            />
          </div>
        </div>
        <div class="flex flex-col gap-4 text-end relative">
          <p class="text-main-cyan-muted text-sm tracking-widest">WAVE PROGRESS</p>
          <p class="text-5xl">
            {{ character().currentWave }}<span class="text-main-cyan-muted">/</span>10
          </p>
          <div class="flex">
            <div
              class="h-0.5 bottom-0 bg-main-cyan"
              [ngStyle]="{ width: character().currentWave * 10 + '%' }"
            ></div>

            <div
              class="h-0.5 bottom-0 bg-main-cyan-muted"
              [ngStyle]="{ width: 100 - character().currentWave * 10 + '%' }"
            ></div>
          </div>
        </div>
      </div>
    </div>
    <div>Test</div>
  </section>
  <footer
    class="text-main-cyan font-mono h-[10vh] px-20 border-t border-t-grid-line flex items-center justify-between"
  >
    <div>
      <p class="text-main-cyan-muted text-sm mb-2">AUTOMATION</p>
      <button
        class="bg-main-cyan-muted/20 text-main-cyan border-main-cyan/50 glow-cyan border-2 px-12 py-4 cursor-pointer"
        (click)="toggleFight()"
      >
        @if (combatService.isFighting()) {
          AUTO_FIGHT: ON
        } @else {
          AUTO_FIGHT: OFF
        }
      </button>
    </div>
    <div>
      <app-skillbutton (skillTriggered)="combatService.useSwiftAttackSkill()">
        SWIFT <br />STRIKE
      </app-skillbutton>
      <app-skillbutton (skillTriggered)="ascensionModal.toggleModal()">
        Open Ascension Modal
      </app-skillbutton>
    </div>
    <div>
      <button
        type="button"
        class="text-black font-bold bg-main-Amber px-20 py-4 text-2xl font-mono tracking-widest shadow-[0_0_8px_rgba(255,184,0,0.6)]"
        (click)="prestige()"
      >
        INITIATE ASCENSION
      </button>
    </div>
  </footer>
</div>
